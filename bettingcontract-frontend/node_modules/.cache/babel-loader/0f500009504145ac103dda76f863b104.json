{"remainingRequest":"/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/node_modules/babel-loader/lib/index.js!/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/node_modules/eslint-loader/index.js??ref--13-0!/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/src/utils/getWeb3.js","dependencies":[{"path":"/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/src/utils/getWeb3.js","mtime":1628160280493},{"path":"/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBXZWIzIGZyb20gJ3dlYjMnOwovKgoqIDEuIENoZWNrIGZvciBpbmplY3RlZCB3ZWIzIChtaXN0L21ldGFtYXNrKQoqIDIuIElmIG1ldGFtYXNrL21pc3QgY3JlYXRlIGEgbmV3IHdlYjMgaW5zdGFuY2UgYW5kIHBhc3Mgb24gcmVzdWx0CiogMy4gR2V0IG5ldHdvcmtJZCAtIE5vdyB3ZSBjYW4gY2hlY2sgdGhlIHVzZXIgaXMgY29ubmVjdGVkIHRvIHRoZSByaWdodCBuZXR3b3JrIHRvIHVzZSBvdXIgZEFwcAoqIDQuIEdldCB1c2VyIGFjY291bnQgZnJvbSBtZXRhbWFzawoqIDUuIEdldCB1c2VyIGJhbGFuY2UKKi8KCnZhciBnZXRXZWIzID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogIC8vIENoZWNrIGZvciBpbmplY3RlZCB3ZWIzIChtaXN0L21ldGFtYXNrKQogIHZhciB3ZWIzanMgPSB3aW5kb3cud2ViMzsKCiAgaWYgKHR5cGVvZiB3ZWIzanMgIT09ICd1bmRlZmluZWQnKSB7CiAgICB2YXIgX3dlYiA9IG5ldyBXZWIzKHdlYjNqcy5jdXJyZW50UHJvdmlkZXIpOwoKICAgIHJlc29sdmUoewogICAgICBpbmplY3RlZFdlYjM6IF93ZWIuaXNDb25uZWN0ZWQoKSwKICAgICAgd2ViMzogZnVuY3Rpb24gd2ViMygpIHsKICAgICAgICByZXR1cm4gX3dlYjsKICAgICAgfQogICAgfSk7CiAgfSBlbHNlIHsKICAgIC8vIHdlYjMgPSBuZXcgV2ViMyhuZXcgV2ViMy5wcm92aWRlcnMuSHR0cFByb3ZpZGVyKCdodHRwOi8vbG9jYWxob3N0Ojc1NDUnKSkgR0FOQUNIRSBGQUxMQkFDSwogICAgcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIGNvbm5lY3QgdG8gTWV0YW1hc2snKSk7CiAgfQp9KS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgLy8gUmV0cmlldmUgbmV0d29yayBJRAogICAgcmVzdWx0LndlYjMoKS52ZXJzaW9uLmdldE5ldHdvcmsoZnVuY3Rpb24gKGVyciwgbmV0d29ya0lkKSB7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGEgbmV0d29ya0lkIGtlZXAgcmVzdWx0IHRoZSBzYW1lIGFuZCByZWplY3QgdGhlIHByb21pc2UKICAgICAgICByZWplY3QobmV3IEVycm9yKCdVbmFibGUgdG8gcmV0cmlldmUgbmV0d29yayBJRCcpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBBc3NpZ24gdGhlIG5ldHdvcmtJZCBwcm9wZXJ0eSB0byBvdXIgcmVzdWx0IGFuZCByZXNvbHZlIHByb21pc2UKICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCByZXN1bHQsIHsKICAgICAgICAgIG5ldHdvcmtJZDogbmV0d29ya0lkCiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICB9CiAgICB9KTsKICB9KTsKfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIC8vIFJldHJpZXZlIGNvaW5iYXNlCiAgICByZXN1bHQud2ViMygpLmV0aC5nZXRDb2luYmFzZShmdW5jdGlvbiAoZXJyLCBjb2luYmFzZSkgewogICAgICBpZiAoZXJyKSB7CiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIGNvaW5iYXNlJykpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc3VsdCA9IE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdCwgewogICAgICAgICAgY29pbmJhc2U6IGNvaW5iYXNlCiAgICAgICAgfSk7CiAgICAgICAgcmVzb2x2ZShyZXN1bHQpOwogICAgICB9CiAgICB9KTsKICB9KTsKfSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIC8vIFJldHJpZXZlIGJhbGFuY2UgZm9yIGNvaW5iYXNlCiAgICByZXN1bHQud2ViMygpLmV0aC5nZXRCYWxhbmNlKHJlc3VsdC5jb2luYmFzZSwgZnVuY3Rpb24gKGVyciwgYmFsYW5jZSkgewogICAgICBpZiAoZXJyKSB7CiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIGJhbGFuY2UgZm9yIGFkZHJlc3M6ICcgKyByZXN1bHQuY29pbmJhc2UpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN1bHQgPSBPYmplY3QuYXNzaWduKHt9LCByZXN1bHQsIHsKICAgICAgICAgIGJhbGFuY2U6IGJhbGFuY2UKICAgICAgICB9KTsKICAgICAgICByZXNvbHZlKHJlc3VsdCk7CiAgICAgIH0KICAgIH0pOwogIH0pOwp9KTsKZXhwb3J0IGRlZmF1bHQgZ2V0V2ViMzs="},{"version":3,"sources":["/Users/tombeck/Desktop/BettingContract Frontend/bettingcontract-frontend/src/utils/getWeb3.js"],"names":["Web3","getWeb3","Promise","resolve","reject","web3js","window","web3","currentProvider","injectedWeb3","isConnected","Error","then","result","version","getNetwork","err","networkId","Object","assign","eth","getCoinbase","coinbase","getBalance","balance"],"mappings":";AACA,OAAOA,IAAP,MAAiB,MAAjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,OAAO,GAAG,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACnD;AACA,MAAIC,MAAM,GAAGC,MAAM,CAACC,IAApB;;AACA,MAAI,OAAOF,MAAP,KAAkB,WAAtB,EAAmC;AACjC,QAAIE,IAAI,GAAG,IAAIP,IAAJ,CAASK,MAAM,CAACG,eAAhB,CAAX;;AACAL,IAAAA,OAAO,CAAC;AACNM,MAAAA,YAAY,EAAEF,IAAI,CAACG,WAAL,EADR;AAENH,MAAAA,IAFM,kBAEE;AACN,eAAOA,IAAP;AACD;AAJK,KAAD,CAAP;AAMD,GARD,MAQO;AACL;AACAH,IAAAA,MAAM,CAAC,IAAIO,KAAJ,CAAU,+BAAV,CAAD,CAAN;AACD;AACF,CAfa,EAgBXC,IAhBW,CAgBN,UAAAC,MAAM,EAAI;AACd,SAAO,IAAIX,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C;AACAS,IAAAA,MAAM,CAACN,IAAP,GAAcO,OAAd,CAAsBC,UAAtB,CAAiC,UAACC,GAAD,EAAMC,SAAN,EAAoB;AACnD,UAAID,GAAJ,EAAS;AACP;AACAZ,QAAAA,MAAM,CAAC,IAAIO,KAAJ,CAAU,+BAAV,CAAD,CAAN;AACD,OAHD,MAGO;AACL;AACAE,QAAAA,MAAM,GAAGK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,MAAlB,EAA0B;AAACI,UAAAA,SAAS,EAATA;AAAD,SAA1B,CAAT;AACAd,QAAAA,OAAO,CAACU,MAAD,CAAP;AACD;AACF,KATD;AAUD,GAZM,CAAP;AAaD,CA9BW,EA+BXD,IA/BW,CA+BN,UAAAC,MAAM,EAAI;AACd,SAAO,IAAIX,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C;AACAS,IAAAA,MAAM,CAACN,IAAP,GAAca,GAAd,CAAkBC,WAAlB,CAA8B,UAACL,GAAD,EAAMM,QAAN,EAAmB;AAC/C,UAAIN,GAAJ,EAAS;AACPZ,QAAAA,MAAM,CAAC,IAAIO,KAAJ,CAAU,6BAAV,CAAD,CAAN;AACD,OAFD,MAEO;AACLE,QAAAA,MAAM,GAAGK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,MAAlB,EAA0B;AAAES,UAAAA,QAAQ,EAARA;AAAF,SAA1B,CAAT;AACAnB,QAAAA,OAAO,CAACU,MAAD,CAAP;AACD;AACF,KAPD;AAQD,GAVM,CAAP;AAWD,CA3CW,EA4CXD,IA5CW,CA4CN,UAAAC,MAAM,EAAI;AACd,SAAO,IAAIX,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C;AACAS,IAAAA,MAAM,CAACN,IAAP,GAAca,GAAd,CAAkBG,UAAlB,CAA6BV,MAAM,CAACS,QAApC,EAA8C,UAACN,GAAD,EAAMQ,OAAN,EAAkB;AAC9D,UAAIR,GAAJ,EAAS;AACPZ,QAAAA,MAAM,CAAC,IAAIO,KAAJ,CAAU,6CAA6CE,MAAM,CAACS,QAA9D,CAAD,CAAN;AACD,OAFD,MAEO;AACLT,QAAAA,MAAM,GAAGK,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBN,MAAlB,EAA0B;AAAEW,UAAAA,OAAO,EAAPA;AAAF,SAA1B,CAAT;AACArB,QAAAA,OAAO,CAACU,MAAD,CAAP;AACD;AACF,KAPD;AAQD,GAVM,CAAP;AAWD,CAxDW,CAAd;AA0DA,eAAeZ,OAAf","sourcesContent":["\nimport Web3 from 'web3'\n\n/*\n* 1. Check for injected web3 (mist/metamask)\n* 2. If metamask/mist create a new web3 instance and pass on result\n* 3. Get networkId - Now we can check the user is connected to the right network to use our dApp\n* 4. Get user account from metamask\n* 5. Get user balance\n*/\n\nlet getWeb3 = new Promise(function (resolve, reject) {\n  // Check for injected web3 (mist/metamask)\n  var web3js = window.web3\n  if (typeof web3js !== 'undefined') {\n    var web3 = new Web3(web3js.currentProvider)\n    resolve({\n      injectedWeb3: web3.isConnected(),\n      web3 () {\n        return web3\n      }\n    })\n  } else {\n    // web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:7545')) GANACHE FALLBACK\n    reject(new Error('Unable to connect to Metamask'))\n  }\n})\n  .then(result => {\n    return new Promise(function (resolve, reject) {\n      // Retrieve network ID\n      result.web3().version.getNetwork((err, networkId) => {\n        if (err) {\n          // If we can't find a networkId keep result the same and reject the promise\n          reject(new Error('Unable to retrieve network ID'))\n        } else {\n          // Assign the networkId property to our result and resolve promise\n          result = Object.assign({}, result, {networkId})\n          resolve(result)\n        }\n      })\n    })\n  })\n  .then(result => {\n    return new Promise(function (resolve, reject) {\n      // Retrieve coinbase\n      result.web3().eth.getCoinbase((err, coinbase) => {\n        if (err) {\n          reject(new Error('Unable to retrieve coinbase'))\n        } else {\n          result = Object.assign({}, result, { coinbase })\n          resolve(result)\n        }\n      })\n    })\n  })\n  .then(result => {\n    return new Promise(function (resolve, reject) {\n      // Retrieve balance for coinbase\n      result.web3().eth.getBalance(result.coinbase, (err, balance) => {\n        if (err) {\n          reject(new Error('Unable to retrieve balance for address: ' + result.coinbase))\n        } else {\n          result = Object.assign({}, result, { balance })\n          resolve(result)\n        }\n      })\n    })\n  })\n\nexport default getWeb3"]}]}